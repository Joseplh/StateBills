<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BoxSite: vue-functional-data-merge</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BoxSite
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__c___users__joseph_workspace__state_bills__box_site_frontend_node_modules_vue-functional-data-merge_readme.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">vue-functional-data-merge </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://img.shields.io/npm/v/vue-functional-data-merge"><img src="https://img.shields.io/npm/v/vue-functional-data-merge.svg?style=for-the-badge" alt="npm" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/vue-functional-data-merge"><img src="https://img.shields.io/npm/dt/vue-functional-data-merge.svg?style=for-the-badge" alt="npm downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/alexsasharegan/vue-functional-data-merge/stargazers"><img src="https://img.shields.io/github/stars/alexsasharegan/vue-functional-data-merge.svg?style=for-the-badge" alt="GitHub stars" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/alexsasharegan/vue-functional-data-merge/issues"><img src="https://img.shields.io/github/issues/alexsasharegan/vue-functional-data-merge.svg?style=for-the-badge" alt="GitHub issues" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/alexsasharegan/vue-functional-data-merge"><img src="https://img.shields.io/travis/alexsasharegan/vue-functional-data-merge.svg?style=for-the-badge" alt="Travis" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/alexsasharegan/vue-functional-data-merge"><img src="https://img.shields.io/coveralls/github/alexsasharegan/vue-functional-data-merge.svg?style=for-the-badge" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/alexsasharegan/vue-functional-data-merge/blob/master/LICENSE.md"><img src="https://img.shields.io/github/license/alexsasharegan/vue-functional-data-merge.svg?style=for-the-badge" alt="GitHub license" style="pointer-events: none;" class="inline"/></a></p>
<p>Vue.js util for intelligently merging data passed to functional components. (1K =&gt; 0.5K gzipped)</p>
<ul>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#why-do-i-need-this-util">Why do I need this util?</a></li>
<li><a href="#scoped-styles">Scoped Styles</a></li>
<li><a href="#performance">Performance</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md22705"></a>
Getting Started</h1>
<p>Load the util from npm:</p>
<div class="fragment"><div class="line"># NPM:</div>
<div class="line">npm i vue-functional-data-merge</div>
<div class="line"> </div>
<div class="line"># Yarn:</div>
<div class="line">yarn add vue-functional-data-merge</div>
</div><!-- fragment --><p>Now import and use it in your functional component declaration:</p>
<div class="fragment"><div class="line">// MyFunctionalComponent.js</div>
<div class="line"> </div>
<div class="line">// ESM</div>
<div class="line">import { mergeData } from &quot;vue-functional-data-merge&quot;;</div>
<div class="line">// Common JS</div>
<div class="line">const { mergeData } = require(&quot;vue-functional-data-merge/dist/lib.common.js&quot;);</div>
<div class="line"> </div>
<div class="line">export default {</div>
<div class="line">  name: &quot;my-functional-component&quot;,</div>
<div class="line">  functional: true,</div>
<div class="line">  props: [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;],</div>
<div class="line">  render(h, { props, data, children }) {</div>
<div class="line">    const componentData = {</div>
<div class="line">      staticClass: &quot;fn-component&quot;, // concatenates all static classes</div>
<div class="line">      class: {</div>
<div class="line">        // object|Array|string all get merged and preserved</div>
<div class="line">        active: props.foo,</div>
<div class="line">        &quot;special-class&quot;: props.bar,</div>
<div class="line">      },</div>
<div class="line">      attrs: {</div>
<div class="line">        id: &quot;my-functional-component&quot;, // now overrides any id placed on the component</div>
<div class="line">      },</div>
<div class="line">      on: {</div>
<div class="line">        // Event handlers are merged to an array of handlers at each event.</div>
<div class="line">        // The last data object passed to `mergeData` will have it&#39;s event handlers called first.</div>
<div class="line">        // Right-most arguments are prepended to event handler array.</div>
<div class="line">        click(e) {</div>
<div class="line">          alert(props.baz);</div>
<div class="line">        },</div>
<div class="line">      },</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    return h(&quot;div&quot;, mergeData(data, componentData), children);</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md22706"></a>
Why do I need this util?</h1>
<p>When writing functional Vue components, the render function receives a <code>context.data</code> object (<a href="https://vuejs.org/v2/guide/render-function.html#Functional-Components">see vue docs</a>). This object that contains the entire data object passed to the component (the shape of which <a href="https://vuejs.org/v2/guide/render-function.html#The-Data-Object-In-Depth">can be found here</a>). In order to write flexible components, the data object used to create the component must be merged with the data received. If not, only the properties defined by the component will be rendered.</p>
<p>Consider this example:</p>
<div class="fragment"><div class="line">// MyBtn.js</div>
<div class="line">export default {</div>
<div class="line">  name: &quot;my-btn&quot;,</div>
<div class="line">  props: [&quot;variant&quot;],</div>
<div class="line">  functional: true,</div>
<div class="line">  render(h, { props, children }) {</div>
<div class="line">    return h(</div>
<div class="line">      &quot;button&quot;,</div>
<div class="line">      {</div>
<div class="line">        staticClass: &quot;btn&quot;,</div>
<div class="line">        class: [`btn-${props.variant}`],</div>
<div class="line">        attrs: { type: &quot;button&quot; },</div>
<div class="line">      },</div>
<div class="line">      children</div>
<div class="line">    );</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><p>This exports a functional button component that applies a base <code>.btn</code> class and a <code>.btn-&lt;variant&gt;</code> class based on the <code>variant</code> prop passed to the component. It's just a simple wrapper around some Bootstrap styling to make repetitive usage simpler. Usage would look like this:</p>
<div class="fragment"><div class="line">&lt;template&gt;</div>
<div class="line">    &lt;form&gt;</div>
<div class="line">        &lt;input type=&quot;text&quot; placeholder=&quot;Name&quot; required&gt;</div>
<div class="line">        &lt;input type=&quot;email&quot; placeholder=&quot;email&quot; required&gt;</div>
<div class="line">        &lt;my-btn variant=&quot;primary&quot; type=&quot;submit&quot; id=&quot;form-submit-btn&quot; @click=&quot;onClick&quot;&gt;Submit&lt;/my-btn&gt;</div>
<div class="line">    &lt;/form&gt;</div>
<div class="line">&lt;/template&gt;</div>
</div><!-- fragment --><p>We've used our Bootstrap button component in a form and conveniently applied the <code>primary</code> variant, but we also wanted to change the button <code>type</code> from <code>button</code> to <code>submit</code>, give it an <code>id</code>, and attach a click handler. This won't work because we haven't passed the attributes, listeners, etc. to the create element call in the component's render function.</p>
<p>To fix this, we might extract out props, merge listeners/attributes, etc. This works well, but gets verbose fast when attempting to support all dom attributes, event listeners, etc. One might think to simply use Object spread or <code>Object.assign</code> to solve this like so:</p>
<div class="fragment"><div class="line">return h(&quot;button&quot;, { ...context.data, ...componentData }, children);</div>
</div><!-- fragment --><p>Now when we try to add any dom attributes, Object spread is essentially performing something like this:</p>
<div class="fragment"><div class="line">Object.assign(</div>
<div class="line">    {},</div>
<div class="line">    {</div>
<div class="line">        props: { variant: &quot;primary&quot; },</div>
<div class="line">        attrs: { id: &quot;form-submit-btn&quot;, type: &quot;submit&quot; }</div>
<div class="line">        on: { click: onClick }</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">        staticClass: &quot;btn&quot;,</div>
<div class="line">        class: [`btn-${props.variant}`],</div>
<div class="line">        attrs: { type: &quot;button&quot; },</div>
<div class="line">        on: {</div>
<div class="line">            click() {</div>
<div class="line">                alert(&quot;Hello from MyBtn!&quot;)</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">)</div>
</div><!-- fragment --><p>The component data will wipe out all the context's <code>attrs</code> and <code>on</code> handlers as <code>Object.assign</code> merges these properties. This is where the <code>mergeData</code> util can help you. It will dig into the nested properties of the <code>context.data</code> and apply different merge strategies for each data property. <code>mergeData</code> works like a nested <code>Object.assign</code> in that the util has a variadic argument length&mdash;you can pass any number of arguments to it, and they will all be merged from left to right (the right most arguments taking merge priority). You don't have to pass a new target object as the first argument, as the return value will always be a fresh object.</p>
<h1><a class="anchor" id="autotoc_md22707"></a>
Scoped Styles</h1>
<p>You may run into cases where you are using a functional component in another component with scoped styles. This would look something like this:</p>
<div class="fragment"><div class="line">&lt;template&gt;</div>
<div class="line">  &lt;button class=&quot;my-class&quot;&gt;</div>
<div class="line">    &lt;slot&gt;&lt;/slot&gt;</div>
<div class="line">  &lt;/button&gt;</div>
<div class="line">&lt;/template&gt;</div>
<div class="line">&lt;style scoped&gt;</div>
<div class="line">  .my-class {</div>
<div class="line">    text-align: center;</div>
<div class="line">  }</div>
<div class="line">&lt;/style&gt;</div>
</div><!-- fragment --><p>This will generate data attributes on the component elements and the css selector.</p>
<div class="fragment"><div class="line">&lt;style&gt;</div>
<div class="line">  .my-class[data-v-f3f3eg9] {</div>
<div class="line">    text-align: center;</div>
<div class="line">  }</div>
<div class="line">&lt;/style&gt;</div>
<div class="line"> </div>
<div class="line">&lt;button data-v-f3f3eg9 class=&quot;my-class&quot;&gt;</div>
<div class="line">  Click me!</div>
<div class="line">&lt;/button&gt;</div>
</div><!-- fragment --><p>When a parent component with scoped styles makes use of a functional component, the data attribute won't be passed down automatically. Instead, you must pull this attribute out manually and add it to the <code>VNodeData</code> used in a render function's <code>createElement</code> call. Doing this requires reaching into Vue internals, which can be risky due to the private nature of the API and its potential to change. For that reason, this is not supported in this util.</p>
<p>However, this util can make that manual merging easier by conforming to the <code>VNodeData</code> shape required by <code>mergeData</code> and Vue itself. Here is an example of a helper function to manually extract a parent's style scope id and conditionally apply it in the functional component's render function.</p>
<div class="fragment"><div class="line">const FunctionalComponent = {</div>
<div class="line">  functional: true,</div>
<div class="line">  render(createElement, context) {</div>
<div class="line">    let { parent, data, children } = context;</div>
<div class="line">    let componentData = { class: &quot;my-class&quot; };</div>
<div class="line"> </div>
<div class="line">    return createElement(</div>
<div class="line">      &quot;button&quot;,</div>
<div class="line">      mergeData(data, getScopedStyleData(parent), componentData),</div>
<div class="line">      children</div>
<div class="line">    );</div>
<div class="line">  },</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">/**</div>
<div class="line"> * @param {Vue} parent</div>
<div class="line"> * @returns {VNodeData}</div>
<div class="line"> */</div>
<div class="line">export function getScopedStyleData(parent) {</div>
<div class="line">  let data = { attrs: {} };</div>
<div class="line"> </div>
<div class="line">  if (parent.$options._scopeId) {</div>
<div class="line">    data.attrs[`data-v-${parent.$options._scopeId}`] = &quot;&quot;;</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  return data;</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md22708"></a>
Performance</h1>
<p>This util was written with performance in mind. Since functional components are perfect for components that are stateless and have many nodes rendered, the <code>mergeData</code> util is expected to be called extensively. As such, minimal variable allocations are made as well as minimal internal function calls _(for loops are preferred over <code>map</code>, <code>reduce</code>, &amp; <code>forEach</code> to avoid adding stack frames)_. TypeScript is used with Vue typings to ensure the most accurate merge strategy for each property of the <code>context.data</code> object. You can run the benchmark yourself, but simple merges run at ~1,000,000 ops/sec and complex merges at ~400,000 ops/sec. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
