<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.19"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BoxSite: Windows Azure Active Directory Authentication Library (ADAL) for Node.js</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BoxSite
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.19 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__c___users__joseph_workspace__state_bills__box_site_frontend_node_modules_adal-node__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Windows Azure Active Directory Authentication Library (ADAL) for Node.js </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The ADAL for node.js library makes it easy for node.js applications to authenticate to AAD in order to access AAD protected web resources. It supports 3 authentication modes shown in the quickstart code below.</p>
<h1><a class="anchor" id="autotoc_md2011"></a>
Versions</h1>
<p>Current version - 0.1.28 <br  />
 Minimum recommended version - 0.1.22 <br  />
 You can find the changes for each version in the <a href="https://github.com/AzureAD/azure-activedirectory-library-for-nodejs/blob/master/changelog.txt">change log</a>.</p>
<h1><a class="anchor" id="autotoc_md2012"></a>
Samples and Documentation</h1>
<p><a href="https://github.com/azure-samples?q=active-directory">We provide a full suite of sample applications and documentation on GitHub</a> to help you get started with learning the Azure Identity system. This includes tutorials for native clients such as Windows, Windows Phone, iOS, OSX, Android, and Linux. We also provide full walkthroughs for authentication flows such as OAuth2, OpenID Connect, Graph API, and other awesome features.</p>
<h1><a class="anchor" id="autotoc_md2013"></a>
Community Help and Support</h1>
<p>We leverage <a href="http://stackoverflow.com/">Stack Overflow</a> to work with the community on supporting Azure Active Directory and its SDKs, including this one! We highly recommend you ask your questions on Stack Overflow (we're all on there!) Also browser existing issues to see if someone has had your question before.</p>
<p>We recommend you use the "adal" tag so we can see it! Here is the latest Q&amp;A on Stack Overflow for ADAL: <a href="http://stackoverflow.com/questions/tagged/adal">http://stackoverflow.com/questions/tagged/adal</a></p>
<h1><a class="anchor" id="autotoc_md2014"></a>
Security Reporting</h1>
<p>If you find a security issue with our libraries or services please report it to <a href="#" onclick="location.href='mai'+'lto:'+'sec'+'ur'+'e@m'+'ic'+'ros'+'of'+'t.c'+'om'; return false;">secure@microsoft.com</a> with as much detail as possible. Your submission may be eligible for a bounty through the <a href="http://aka.ms/bugbounty">Microsoft Bounty</a> program. Please do not post security issues to GitHub Issues or any other public site. We will contact you shortly upon receiving the information. We encourage you to get notifications of when security incidents occur by visiting <a href="https://technet.microsoft.com/en-us/security/dd252948">this page</a> and subscribing to Security Advisory Alerts.</p>
<h1><a class="anchor" id="autotoc_md2015"></a>
Contributing</h1>
<p>All code is licensed under the Apache 2.0 license and we triage actively on GitHub. We enthusiastically welcome contributions and feedback. You can clone the repo and start contributing now.</p>
<h1><a class="anchor" id="autotoc_md2016"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md2017"></a>
Installation</h2>
<div class="fragment"><div class="line">### Configure the logging</div>
<div class="line"> </div>
<div class="line">```javascript</div>
<div class="line">var logging = require(&#39;adal-node&#39;).Logging;</div>
<div class="line"> </div>
<div class="line">logging.setLoggingOptions({</div>
<div class="line">  log: function(level, message, error) {</div>
<div class="line">    // provide your own implementation of the log function</div>
<div class="line">  },</div>
<div class="line">  level: logging.LOGGING_LEVEL.VERBOSE, // provide the logging level</div>
<div class="line">  loggingWithPII: false  // Determine if you want to log personal identitification information. The default value is false.</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2018"></a>
Authorization Code</h2>
<p>See the <a href="https://github.com/MSOpenTech/azure-activedirectory-library-for-nodejs/blob/master/sample/website-sample.js">website sample</a> for a complete bare bones express based web site that makes use of the code below.</p>
<div class="fragment"><div class="line">var AuthenticationContext = require(&#39;adal-node&#39;).AuthenticationContext;</div>
<div class="line"> </div>
<div class="line">var clientId = &#39;yourClientIdHere&#39;;</div>
<div class="line">var clientSecret = &#39;yourAADIssuedClientSecretHere&#39;</div>
<div class="line">var authorityHostUrl = &#39;https://login.windows.net&#39;;</div>
<div class="line">var tenant = &#39;myTenant&#39;;</div>
<div class="line">var authorityUrl = authorityHostUrl + &#39;/&#39; + tenant;</div>
<div class="line">var redirectUri = &#39;http://localhost:3000/getAToken&#39;;</div>
<div class="line">var resource = &#39;00000002-0000-0000-c000-000000000000&#39;;</div>
<div class="line">var templateAuthzUrl = &#39;https://login.windows.net/&#39; + </div>
<div class="line">                        tenant + </div>
<div class="line">                        &#39;/oauth2/authorize?response_type=code&amp;client_id=&#39; +</div>
<div class="line">                        clientId + </div>
<div class="line">                        &#39;&amp;redirect_uri=&#39; + </div>
<div class="line">                        redirectUri + </div>
<div class="line">                        &#39;&amp;state=&lt;state&gt;&amp;resource=&#39; + </div>
<div class="line">                        resource;</div>
<div class="line"> </div>
<div class="line">function createAuthorizationUrl(state) {</div>
<div class="line">  return templateAuthzUrl.replace(&#39;&lt;state&gt;&#39;, state);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// Clients get redirected here in order to create an OAuth authorize url and redirect them to AAD.</div>
<div class="line">// There they will authenticate and give their consent to allow this app access to</div>
<div class="line">// some resource they own.</div>
<div class="line">app.get(&#39;/auth&#39;, function(req, res) {</div>
<div class="line">  crypto.randomBytes(48, function(ex, buf) {</div>
<div class="line">    var token = buf.toString(&#39;base64&#39;).replace(/\//g,&#39;_&#39;).replace(/\+/g,&#39;-&#39;);</div>
<div class="line"> </div>
<div class="line">    res.cookie(&#39;authstate&#39;, token);</div>
<div class="line">    var authorizationUrl = createAuthorizationUrl(token);</div>
<div class="line"> </div>
<div class="line">    res.redirect(authorizationUrl);</div>
<div class="line">  });</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// After consent is granted AAD redirects here.  The ADAL library is invoked via the</div>
<div class="line">// AuthenticationContext and retrieves an access token that can be used to access the</div>
<div class="line">// user owned resource.</div>
<div class="line">app.get(&#39;/getAToken&#39;, function(req, res) {</div>
<div class="line">  if (req.cookies.authstate !== req.query.state) {</div>
<div class="line">    res.send(&#39;error: state does not match&#39;);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  var authenticationContext = new AuthenticationContext(authorityUrl);</div>
<div class="line"> </div>
<div class="line">  authenticationContext.acquireTokenWithAuthorizationCode(</div>
<div class="line">    req.query.code,</div>
<div class="line">    redirectUri,</div>
<div class="line">    resource,</div>
<div class="line">    clientId, </div>
<div class="line">    clientSecret,</div>
<div class="line">    function(err, response) {</div>
<div class="line">      var errorMessage = &#39;&#39;;</div>
<div class="line">      if (err) {</div>
<div class="line">        errorMessage = &#39;error: &#39; + err.message + &#39;\n&#39;;</div>
<div class="line">      }</div>
<div class="line">      errorMessage += &#39;response: &#39; + JSON.stringify(response);</div>
<div class="line">      res.send(errorMessage);</div>
<div class="line">    }</div>
<div class="line">  );</div>
<div class="line">});</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2019"></a>
Server to Server via Client Credentials</h2>
<p>See the <a href="https://github.com/MSOpenTech/azure-activedirectory-library-for-nodejs/blob/master/sample/client-credentials-sample.js">client credentials sample</a>.</p>
<div class="fragment"><div class="line">var AuthenticationContext = require(&#39;adal-node&#39;).AuthenticationContext;</div>
<div class="line"> </div>
<div class="line">var authorityHostUrl = &#39;https://login.windows.net&#39;;</div>
<div class="line">var tenant = &#39;myTenant.onmicrosoft.com&#39;; // AAD Tenant name.</div>
<div class="line">var authorityUrl = authorityHostUrl + &#39;/&#39; + tenant;</div>
<div class="line">var applicationId = &#39;yourApplicationIdHere&#39;; // Application Id of app registered under AAD.</div>
<div class="line">var clientSecret = &#39;yourAADIssuedClientSecretHere&#39;; // Secret generated for app. Read this environment variable.</div>
<div class="line">var resource = &#39;00000002-0000-0000-c000-000000000000&#39;; // URI that identifies the resource for which the token is valid.</div>
<div class="line"> </div>
<div class="line">var context = new AuthenticationContext(authorityUrl);</div>
<div class="line"> </div>
<div class="line">context.acquireTokenWithClientCredentials(resource, applicationId, clientSecret, function(err, tokenResponse) {</div>
<div class="line">  if (err) {</div>
<div class="line">    console.log(&#39;well that didn\&#39;t work: &#39; + err.stack);</div>
<div class="line">  } else {</div>
<div class="line">    console.log(tokenResponse);</div>
<div class="line">  }</div>
<div class="line">});</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2020"></a>
License</h1>
<p>Copyright (c) Microsoft Open Technologies, Inc. All rights reserved. Licensed under the Apache License, Version 2.0 (the "License");</p>
<h1><a class="anchor" id="autotoc_md2021"></a>
We Value and Adhere to the Microsoft Open Source Code of Conduct</h1>
<p>This project has adopted the <a href="https://opensource.microsoft.com/codeofconduct/">Microsoft Open Source Code of Conduct</a>. For more information see the <a href="https://opensource.microsoft.com/codeofconduct/faq/">Code of Conduct FAQ</a> or contact <a href="#" onclick="location.href='mai'+'lto:'+'ope'+'nc'+'ode'+'@m'+'icr'+'os'+'oft'+'.c'+'om'; return false;">opencode@microsoft.com</a> with any additional questions or comments. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.19 </li>
  </ul>
</div>
</body>
</html>
